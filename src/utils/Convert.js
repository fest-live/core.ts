/**
 * Convert position from client space to orientation space.
 * @param pos_in_cs - Position in client space [x, y]
 * @param size_in_cs - Size in client space [width, height]
 * @param or_i - Orientation index (0=normal, 1=90° swapped, 2=180°, 3=270° swapped)
 * @returns Position in orientation space [x, y]
 */
export const cvt_cs_to_os = (pos_in_cs, size_in_cs, or_i = 0) => {
    const size_in_os = [...size_in_cs];
    const pos_in_swap = [...pos_in_cs];
    // compute swap
    if (or_i % 2) {
        pos_in_swap.reverse();
        size_in_os.reverse();
    }
    // compute rotation
    return [
        ((or_i == 0 || or_i == 3) ? pos_in_swap[0] : (size_in_os[0] - pos_in_swap[0])) || 0,
        ((or_i == 0 || or_i == 1) ? pos_in_swap[1] : (size_in_os[1] - pos_in_swap[1])) || 0
    ];
};
//
export const cvt_os_to_cs = (pos_in_os, size_in_cs, or_i = 0) => {
    const size_in_os = [...size_in_cs];
    const pos_in_cp = [...pos_in_os];
    // use orientation space for size
    if (or_i % 2) {
        size_in_os.reverse();
    }
    // back-reversion in orientation space
    const pos_in_cs = [
        ((or_i == 0 || or_i == 3) ? pos_in_cp[0] : (size_in_os[0] - pos_in_cp[0])) || 0,
        ((or_i == 0 || or_i == 1) ? pos_in_cp[1] : (size_in_os[1] - pos_in_cp[1])) || 0
    ];
    // back-swap to client-space
    if (or_i % 2) {
        pos_in_cs.reverse();
    }
    return pos_in_cs;
};
// for dragging relative (from zero)
export const cvt_rel_cs_to_os = (rel_in_cs, or_i = 0) => {
    const rel_in_swap = [...rel_in_cs];
    // compute swap
    if (or_i % 2) {
        rel_in_swap.reverse();
    }
    // compute rotation
    return [
        ((or_i == 0 || or_i == 3) ? rel_in_swap[0] : -rel_in_swap[0]) || 0,
        ((or_i == 0 || or_i == 1) ? rel_in_swap[1] : -rel_in_swap[1]) || 0
    ];
};
// for dragging relative (from zero)
export const cvt_rel_os_to_cs = (rel_in_os, or_i = 0) => {
    const rel_in_cp = [...rel_in_os];
    // back-reversion in orientation space
    const pos_in_cs = [
        ((or_i == 0 || or_i == 3) ? rel_in_cp[0] : -rel_in_cp[0]) || 0,
        ((or_i == 0 || or_i == 1) ? rel_in_cp[1] : -rel_in_cp[1]) || 0
    ];
    // back-swap to client-space
    if (or_i % 2) {
        pos_in_cs.reverse();
    }
    return pos_in_cs;
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29udmVydC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkNvbnZlcnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7OztHQU1HO0FBQ0gsTUFBTSxDQUFDLE1BQU0sWUFBWSxHQUFHLENBQUMsU0FBMkIsRUFBRSxVQUE0QixFQUFFLE9BQWUsQ0FBQyxFQUFvQixFQUFFO0lBQzFILE1BQU0sVUFBVSxHQUFHLENBQUMsR0FBRyxVQUFVLENBQUMsQ0FBQztJQUNuQyxNQUFNLFdBQVcsR0FBcUIsQ0FBQyxHQUFHLFNBQVMsQ0FBQyxDQUFDO0lBRXJELGVBQWU7SUFDZixJQUFJLElBQUksR0FBQyxDQUFDLEVBQUUsQ0FBQztRQUFDLFdBQVcsQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUFDLFVBQVUsQ0FBQyxPQUFPLEVBQUUsQ0FBQztJQUFDLENBQUM7SUFFNUQsbUJBQW1CO0lBQ25CLE9BQU87UUFDSCxDQUFDLENBQUMsSUFBSSxJQUFFLENBQUMsSUFBSSxJQUFJLElBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLEdBQUcsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsSUFBSSxDQUFDO1FBQy9FLENBQUMsQ0FBQyxJQUFJLElBQUUsQ0FBQyxJQUFJLElBQUksSUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLFVBQVUsQ0FBQyxDQUFDLENBQUMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7S0FDbEYsQ0FBQztBQUNOLENBQUMsQ0FBQztBQUVGLEVBQUU7QUFDRixNQUFNLENBQUMsTUFBTSxZQUFZLEdBQUcsQ0FBQyxTQUEyQixFQUFFLFVBQTRCLEVBQUUsT0FBZSxDQUFDLEVBQW9CLEVBQUU7SUFDMUgsTUFBTSxV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QUFDO0lBQ3BDLE9BQU8sU0FBUyxDQUFDO0FBQ3JCLENBQUMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29udmVydCBwb3NpdGlvbiBmcm9tIGNsaWVudCBzcGFjZSB0byBvcmllbnRhdGlvbiBzcGFjZS5cbiAqIEBwYXJhbSBwb3NfaW5fY3MgLSBQb3NpdGlvbiBpbiBjbGllbnQgc3BhY2UgW3gsIHldXG4gKiBAcGFyYW0gc2l6ZV9pbl9jcyAtIFNpemUgaW4gY2xpZW50IHNwYWNlIFt3aWR0aCwgaGVpZ2h0XVxuICogQHBhcmFtIG9yX2kgLSBPcmllbnRhdGlvbiBpbmRleCAoMD1ub3JtYWwsIDE9OTDCsCBzd2FwcGVkLCAyPTE4MMKwLCAzPTI3MMKwIHN3YXBwZWQpXG4gKiBAcmV0dXJucyBQb3NpdGlvbiBpbiBvcmllbnRhdGlvbiBzcGFjZSBbeCwgeV1cbiAqL1xuZXhwb3J0IGNvbnN0IGN2dF9jc190b19vcyA9IChwb3NfaW5fY3M6IFtudW1iZXIsIG51bWJlcl0sIHNpemVfaW5fY3M6IFtudW1iZXIsIG51bWJlcl0sIG9yX2k6IG51bWJlciA9IDApOiBbbnVtYmVyLCBudW1iZXJdID0+IHtcbiAgICBjb25zdCBzaXplX2luX29zID0gWy4uLnNpemVfaW5fY3NdO1xuICAgIGNvbnN0IHBvc19pbl9zd2FwOiBbbnVtYmVyLCBudW1iZXJdID0gWy4uLnBvc19pbl9jc107XG5cbiAgICAvLyBjb21wdXRlIHN3YXBcbiAgICBpZiAob3JfaSUyKSB7IHBvc19pbl9zd2FwLnJldmVyc2UoKTsgc2l6ZV9pbl9vcy5yZXZlcnNlKCk7IH1cblxuICAgIC8vIGNvbXB1dGUgcm90YXRpb25cbiAgICByZXR1cm4gW1xuICAgICAgICAoKG9yX2k9PTAgfHwgb3JfaT09MykgPyBwb3NfaW5fc3dhcFswXSA6IChzaXplX2luX29zWzBdIC0gcG9zX2luX3N3YXBbMF0pKSB8fCAwLFxuICAgICAgICAoKG9yX2k9PTAgfHwgb3JfaT09MSkgPyBwb3NfaW5fc3dhcFsxXSA6IChzaXplX2luX29zWzFdIC0gcG9zX2luX3N3YXBbMV0pKSB8fCAwXG4gICAgXTtcbn07XG5cbi8vXG5leHBvcnQgY29uc3QgY3Z0X29zX3RvX2NzID0gKHBvc19pbl9vczogW251bWJlciwgbnVtYmVyXSwgc2l6ZV9pbl9jczogW251bWJlciwgbnVtYmVyXSwgb3JfaTogbnVtYmVyID0gMCk6IFtudW1iZXIsIG51bWJlcl0gPT4ge1xuICAgIGNvbnN0IHNpemVfaW5fb3MgPSBbLi4uc2l6ZV9pbl9jc107XG4gICAgY29uc3QgcG9zX2luX2NwOiBbbnVtYmVyLCBudW1iZXJdID0gWy4uLnBvc19pbl9vc107XG5cbiAgICAvLyB1c2Ugb3JpZW50YXRpb24gc3BhY2UgZm9yIHNpemVcbiAgICBpZiAob3JfaSUyKSB7IHNpemVfaW5fb3MucmV2ZXJzZSgpOyB9XG5cbiAgICAvLyBiYWNrLXJldmVyc2lvbiBpbiBvcmllbnRhdGlvbiBzcGFjZVxuICAgIGNvbnN0IHBvc19pbl9jczogW251bWJlciwgbnVtYmVyXSA9IFtcbiAgICAgICAgKChvcl9pPT0wIHx8IG9yX2k9PTMpID8gcG9zX2luX2NwWzBdIDogKHNpemVfaW5fb3NbMF0gLSBwb3NfaW5fY3BbMF0pKSB8fCAwLFxuICAgICAgICAoKG9yX2k9PTAgfHwgb3JfaT09MSkgPyBwb3NfaW5fY3BbMV0gOiAoc2l6ZV9pbl9vc1sxXSAtIHBvc19pbl9jcFsxXSkpIHx8IDBcbiAgICBdO1xuXG4gICAgLy8gYmFjay1zd2FwIHRvIGNsaWVudC1zcGFjZVxuICAgIGlmIChvcl9pJTIpIHsgcG9zX2luX2NzLnJldmVyc2UoKTsgfVxuICAgIHJldHVybiBwb3NfaW5fY3M7XG59O1xuXG5cblxuLy8gZm9yIGRyYWdnaW5nIHJlbGF0aXZlIChmcm9tIHplcm8pXG5leHBvcnQgY29uc3QgY3Z0X3JlbF9jc190b19vcyA9IChyZWxfaW5fY3M6IFtudW1iZXIsIG51bWJlcl0sIG9yX2k6IG51bWJlciA9IDApOiBbbnVtYmVyLCBudW1iZXJdID0+IHtcbiAgICBjb25zdCByZWxfaW5fc3dhcDogW251bWJlciwgbnVtYmVyXSA9IFsuLi5yZWxfaW5fY3NdO1xuXG4gICAgLy8gY29tcHV0ZSBzd2FwXG4gICAgaWYgKG9yX2klMikgeyByZWxfaW5fc3dhcC5yZXZlcnNlKCk7IH1cblxuICAgIC8vIGNvbXB1dGUgcm90YXRpb25cbiAgICByZXR1cm4gW1xuICAgICAgICAoKG9yX2k9PTAgfHwgb3JfaT09MykgPyByZWxfaW5fc3dhcFswXSA6IC1yZWxfaW5fc3dhcFswXSkgfHwgMCxcbiAgICAgICAgKChvcl9pPT0wIHx8IG9yX2k9PTEpID8gcmVsX2luX3N3YXBbMV0gOiAtcmVsX2luX3N3YXBbMV0pIHx8IDBcbiAgICBdO1xufTtcblxuLy8gZm9yIGRyYWdnaW5nIHJlbGF0aXZlIChmcm9tIHplcm8pXG5leHBvcnQgY29uc3QgY3Z0X3JlbF9vc190b19jcyA9IChyZWxfaW5fb3M6IFtudW1iZXIsIG51bWJlcl0sIG9yX2k6IG51bWJlciA9IDApOiBbbnVtYmVyLCBudW1iZXJdID0+IHtcbiAgICBjb25zdCByZWxfaW5fY3A6IFtudW1iZXIsIG51bWJlcl0gPSBbLi4ucmVsX2luX29zXTtcblxuICAgIC8vIGJhY2stcmV2ZXJzaW9uIGluIG9yaWVudGF0aW9uIHNwYWNlXG4gICAgY29uc3QgcG9zX2luX2NzOiBbbnVtYmVyLCBudW1iZXJdID0gW1xuICAgICAgICAoKG9yX2k9PTAgfHwgb3JfaT09MykgPyByZWxfaW5fY3BbMF0gOiAtcmVsX2luX2NwWzBdKSB8fCAwLFxuICAgICAgICAoKG9yX2k9PTAgfHwgb3JfaT09MSkgPyByZWxfaW5fY3BbMV0gOiAtcmVsX2luX2NwWzFdKSB8fCAwXG4gICAgXTtcblxuICAgIC8vIGJhY2stc3dhcCB0byBjbGllbnQtc3BhY2VcbiAgICBpZiAob3JfaSUyKSB7IHBvc19pbl9jcy5yZXZlcnNlKCk7IH1cbiAgICByZXR1cm4gcG9zX2luX2NzO1xufTtcbiJdfQ==